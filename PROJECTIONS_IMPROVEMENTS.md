# Projection System Improvements

## Current System

The projection system calculates predicted Points Per Game (PPG) using two methods depending on a player's history:
1. **WeightedAveragePPG (Veterans):** A 3-year games-scaled average with fixed 0.50 / 0.30 / 0.20 recency weights.
2. **RookieTrajectoryPPG (2nd-Year Players):** Takes their rookie season PPG and adjusts it up or down by plotting the ratio of their 2nd-half vs 1st-half snap counts (capped at ±50%).

These are currently duplicated in Python (`scripts/projection_methods.py`) and TypeScript (`web/lib/projection-methods.ts`).

## Potential Improvements

The database already stores rich historical data like `birth_date`, positional info, raw NFL stats, and half-season snap records. We can use these to build more sophisticated projection models.

### 1. Age-Based Regression Curves 
**Problem:** A 26-year-old RB and a 30-year-old RB with identical 3-year histories receive identical projections, even though the 30-year-old is highly likely to decline.
**Proposal:** Apply a position-specific age multiplier. RBs typically fall off after 27, while QBs peak later and decline much more gracefully.

### 2. Position-Specific Stability Variations
**Problem:** The 3-year recency weights (0.50/0.30/0.20) are applied generically to all players.
**Proposal:** QBs are incredibly stable year-over-year, while RBs are injured often and replaced quickly. We should use flatter weights for QBs (e.g. 0.40/0.35/0.25) and heavier recency weights for RBs (e.g. 0.60/0.25/0.15).

### 3. Games Played (Availability) Projection
**Problem:** Two players who score 15 PPG—one who played 17 games and one who played 8 games—get identical per-game projections. Their *total* projected season value is vastly different.
**Proposal:** Project `games_played` separately (using a similar weighted average of their injury history) and multiply `projected_ppg * projected_games` to get `projected_total_value`.

### 4. Veteran Snap Trajectory
**Problem:** Currently, only rookies get an adjustment based on their 2nd-half vs 1st-half snap counts.
**Proposal:** A veteran WR whose snap share doubled in December is also telling us something important. We should apply a mild H2/H1 snap adjustment (perhaps clamped to ±15%) to veterans to capture recent promotions or demotions.

### 5. Mean Reversion for Outliers
**Problem:** A player who breaks out and scores double their career average in a single season is usually due for regression.
**Proposal:** For players deviating dramatically from their career baseline, regress their projection 20-30% back toward their career mean to avoid chasing outlier seasons.

### 6. Workload Sustainability Discount
**Problem:** RBs who carry the ball 300+ times are statistically prone to injury or efficiency decline the following year (the "Curse of 370").
**Proposal:** Pull `rushing_attempts` from the `player_stats` table; if an RB exceeded 280-300 carries the previous year, apply a small workload discount to their projection.

---

*Note: The primary goal for v2 is transitioning to a single source-of-truth table (`player_projections`) generated by the backend, ensuring both Python and TypeScript components read the exact same data without duplicating mathematical logic.*
